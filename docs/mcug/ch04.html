<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 4. Marking</title><link rel="stylesheet" href="techpub.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.75.1" /><link rel="home" href="index.html" title="BridgePoint Model Compiler - User's Guide" /><link rel="up" href="index.html" title="BridgePoint Model Compiler - User's Guide" /><link rel="prev" href="ch03s06.html" title="Compiling" /><link rel="next" href="ch05.html" title="Chapter 5. Enumerated Types" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 4. Marking</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03s06.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch05.html">Next</a></td></tr></table><hr /></div><div class="chapter" title="Chapter 4. Marking"><div class="titlepage"><div><div><h2 class="title"><a id="Marking-chapter"></a>Chapter 4. Marking</h2></div></div></div><div class="highlights"><a id="Marking-chapter-high"></a><p>MC-3020 provides
a rich set of ``knobs and dials'' that can be spun to optimize
and customize the code generation process.  This chapter
gives instructions on the use of these marking parameters.</p></div><p>Formerly termed "coloring", <span class="emphasis"><em>marking</em></span>
is the primary means of steering and controlling the
code generation process.  When there is more than one software
architecture element into which an xtUML element can be translated,
<span class="emphasis"><em>marks</em></span> are used to indicate which translation
to make.  The name ``mark'' comes from the visualization of using
a highlighter pen to mark each element that has a particular
property.  Marks are used to direct the translation to select one
of two or more branches in the translation rules.  It is through
marking that design decisions are injected during the translation
process.</p><p>An example of the type of design information that is
specified through marking is the mapping of analysis data types
into implementation (e.g., C) data types.  This is
information that does not belong in either the xtUML models or the
model compiler itself.</p><div class="section" title="How MC-3020 Provides for Marking"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Marking-How-section"></a>How MC-3020 Provides for Marking</h2></div></div></div><div class="highlights"><p>Marking capability can be provided in many
  different ways.  In MC-3020 marking input is communicated to the
  model compiler through marking files read during
  translation.  Other marking input is provided through key words
  placed in artifact descriptions with BridgePoint Builder.
  Marking input steers the code generation by
  selecting between alternatives during code
  generation.</p></div><p>Some marking is mandatory; some marking is optional.  In the
  case of optional marking, the model compiler will assume reasonable
  defaults.  In the case of mandatory marking, the model compiler is
  not capable of divining the intent of the user and will abort the
  translation.</p><div class="section" title="Bridge Marking"><div class="titlepage"><div><div><h3 class="title"><a id="idm60872775856"></a>Bridge Marking</h3></div></div></div>
    The <code class="filename">bridge.mark</code> is used to mark interrupt functions.
    
    <div class="section" title="Marking a Bridge Safe for Interrupt Invocation"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872774000"></a>Marking a Bridge Safe for Interrupt Invocation</h4></div></div></div><p>MC-3020 allows functions and messages
      to be marked as
      callable from interrupt handlers or other asynchronous
      sources (such as other tasks, signal handlers, etc).
      Functions and messages
      marked here will generate a short stub routine
      that will defer execution of the function or message to be between
      dispatched state actions.  When a function or message marked
      as safe for interrupts is invoked, its action body is
      posted to a queue for dispatch after any currently running
      state action completes.  This provides architecture
      data mechanism integrity while maintaining application data
      access set consistency.</p><p>Functions and messages marked safe for interrupts
      cannot return data.  They must be of return type void.
      However, core data type data
      can be passed into these functions.
      Such data is packaged safely at interrupt level and then
      unpacked during function execution.</p><p>To indicate to the model compiler that a
      function
      may be invoked in a manner safe for
      invocation from an interrupt handler or other asynchronous
      activation (one for each function):
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagSyncServiceSafeForInterrupts</b>(</code></td><td>string <var class="pdparam">"component"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"function"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>
        xtUML component name</p></td></tr><tr><td><p><span class="term">function</span></p></td><td><p>is
        name of the function being tagged
        as safe for calling.</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872765184"></a><p class="title"><b>Example 4.1. Tagging Interrupt Bridges</b></p><div class="example-contents"><pre class="programlisting">
.invoke TagSyncServiceSafeForInterrupts( "ILB", "kick_start" )
        </pre></div></div><p><br class="example-break" />
      </p><p>To indicate to the model compiler that a
      message
      may be invoked in a manner safe for
      invocation from an interrupt handler or other asynchronous
      activation (one for each message):
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkMessageSafeForInterrupts</b>(</code></td><td>string <var class="pdparam">"component_name"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"port_name"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"message_name"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component_name</span></p></td><td><p>
        xtUML component name</p></td></tr><tr><td><p><span class="term">port_name</span></p></td><td><p>
        name of port on the component labeled in the first parameter</p></td></tr><tr><td><p><span class="term">message_name</span></p></td><td><p>is
        the name of the message within the port being tagged
        as safe for calling.</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872756464"></a><p class="title"><b>Example 4.2. Tagging Interrupt Bridges</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkMessageSafeForInterrupts( "Tracking", "UI", "startStopButtonPressed" )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Enabling/Disabling Interrupts"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872754768"></a>Enabling/Disabling Interrupts</h4></div></div></div><p>To protect data structures for Interrupt Safe Bridges,
      interrupts are disabled for a very few instructions.
      The method of disabling interrupts varies from target to
      target and from compiler to compiler.  Therefore, the
      responsibility of defining the specific flavor of EI/DI
      instruction is left to the user.  The marking functions
      <code class="function">UserEnableInterrupts</code> and
      <code class="function">UserDisableInterrupts</code> are
      are provided for specifying the specific way interrupts
      are enabled and disabled with your specific target.</p><p>To define the instruction sequence for enabling
      and disabling interrupts, edit the system-level user
      defined rule file <code class="filename">sys_functions.arc</code>.
      </p></div><div class="section" title="Bit Fields"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872751024"></a>Bit Fields</h4></div></div></div><p>Bit fields provide a means of packing many small
      value attributes into single words of computer storage.
      MC-3020 allows attributes to be stored as bit fields
      in ANSI C structs.</p><p>Attributes are marked with BridgePoint Builder.  The string
      BIT_WIDTH: n is placed within a comment as the first line
      of the attribute description.  ``n'' is the width in
      bits required to store the attribute.</p><p>It should be understood that bit fields are
      inherently somewhat less portable than most other
      ANSI C constructs.  Dependence upon ``Endian-ness'',
      memory models and other compiler/target implementation
      specifics is not uncommon.  Use bit fields with care.</p><p>The maximum width for a bit field member attribute
      is 16 bits.  Bit field members are of type unsigned int.</p></div><div class="section" title="Fixing Class Extents"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872747120"></a>Fixing Class Extents</h4></div></div></div><p>MC-3020 provides a means of establishing the base
      memory address of class instance collections (extents).
      Within BridgePoint Builder the string
      BASE_ADDRESS: n is placed within a comment as the first
      line of the class description.  ``n'' is the memory
      address anchoring the start of the collection of class
      instances.</p><p>Two user defined rule file functions at the system-level 
      define how this number (``n'') will appear in the generated
      code.  One function (<code class="function">UserFixExtentBaseBegin</code>)
      is used to insert code before the definition of the class
      instance collection memory.  Another function
      (<code class="function">UserFixExtentBaseEnd</code>) is used to 
      insert code directly after the data definition.  This
      combination of functions will allow a <span class="command"><strong>pragma</strong></span>
      around the data definition.</p><p>To define the instruction sequence for fixing the
      class extent, edit the system-level user
      defined rule file <code class="filename">sys_functions.arc</code>.
      </p></div></div><div class="section" title="Specifying Data Types, Precision and Enumerators"><div class="titlepage"><div><div><h3 class="title"><a id="idm60872742224"></a>Specifying Data Types, Precision and Enumerators</h3></div></div></div><p>BridgePoint allows the user to define special data
    types.  Marking is used to define the precision of these data
    types.  This is particularly useful to reduce the storage
    (say from 16 or 32 bits to 8 bits) of class attributes when
    the ranges of the attributes are known to be limited.
    User defined types which are also enumerations are included
    in the category of types that can be controlled.
    The <code class="filename">datatype.mark</code> provides the means
    for specifying these data type specializations.</p><p>Note that core types can be marked with this function as
    well as user defined types (UDTs).  For example, the core type real
    can be marked to generate "double" precision.</p><p>The return data type for bridges and operations
    can be user defined data types.  Empty operations can be
    used as a sort of variable declaration in conjunction with
    UDT precision tagging.</p><div class="section" title="Tagging Precision"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872738688"></a>Tagging Precision</h4></div></div></div><p>Mark <code class="function">TagDataTypePrecision</code> may only be
      used for application analysis data types which are derived from
      either BridgePoint core data types of <span class="type">integer</span> or
      <span class="type">real</span>.
      Also, user defined types that are enumerations
      can be marked.  Such data will have core data type
      <span class="type">string</span>, but will serve as integers.
      Attempting to use this mark with any other
      core data type will result in a fatal marking error
      (translation aborted).  This restriction applies equally to
      both component specific and system wide use of this mark.</p><p>Precision tag  <em class="parameter"><code>tagged_name</code></em> may be
      any standard C/C++ integer or real variable type.  For
      example, <span class="type">unsigned char</span>, <span class="type">long long</span>,
      <span class="type">double</span>, etc.  POSIX types are also accepted, such
      as <span class="type">uchar_t</span>, <span class="type">ulong_t</span>, etc.</p><p>When an analysis class is instantiated, the default is
      to initialize attributes of core type <span class="type">integer</span> to
      0, and attributes of core type <span class="type">real</span> to 0.0
      (declared as code type <span class="type">float</span>).  Tag
       <em class="parameter"><code>initial_value</code></em> may be used to re-define
      the default initialization value.</p><p>Casting may be used in the tag, such as
       <em class="parameter"><code>"(unsigned)EACCESS"</code></em>, but should be used
      only with careful system level discretion.</p><p>No translation time error checking is performed on
       <em class="parameter"><code>initial_value</code></em>.  Bogus tags such as
       <em class="parameter"><code>"@*#$"</code></em> will only be caught during
      compilation.</p><p>Invoke <code class="function">TagDataTypePrecision</code> to
      indicate to the model compiler the precision of a user defined
      data type.
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagDataTypePrecision</b>(</code></td><td>string <var class="pdparam">"component"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"dt_name"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"tagged_name"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"initial_value"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>
        component name (Use ``*'' to indicate a system wide data type to
        be applied to all components containing the user data
        type.)</p></td></tr><tr><td><p><span class="term">dt_name</span></p></td><td><p>name of the
        data type as known in the application
        analysis</p></td></tr><tr><td><p><span class="term">tagged_name</span></p></td><td><p>name of
        the data type as known in generated implementation code
        (e.g. the precision of the data
        type)</p></td></tr><tr><td><p><span class="term">initial_value</span></p></td><td><p>
        optional specification of the default value for the data
        type (Use "" for the architectural default (e.g. 0 for
        integer, 0.0 for real.)</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872717920"></a><p class="title"><b>Example 4.3. Data Type Precision</b></p><div class="example-contents"><pre class="programlisting">
.invoke TagDataTypePrecision( "MyDom", "Octet", "uchar_t", "" )
.invoke TagDataTypePrecision( "MyDom", "FunkyReal", "double", "666.999" )
.invoke TagDataTypePrecision( "*", "SysWideLong", "long int", "-1" )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Mapping Pointer Types"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872716176"></a>Mapping Pointer Types</h4></div></div></div><p>To allow for pointer reference to arbitrarily shaped
      masses of data, user-defined data types can be implemented
      as pointers.  After marking a UDT as a pointer, the pointer
      typed data can be passed into and returned from operation
      and bridge operations.
      Marking is used to tag pointer types.
      The <code class="filename">datatype.mark</code> provides the means
      for specifying these pointer data type specializations.</p><p>Invoke <code class="function">MapDataTypeAsPointer</code> to
      indicate to the model compiler that a user defined
      data type shall be implemented as a pointer.
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MapDataTypeAsPointer</b>(</code></td><td>string <var class="pdparam">"component"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"dt_name"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"pointer_type"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"include_file"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>
        component name (Use ``*'' to indicate a system wide data type to
        be applied to all components containing the user data
        type.)</p></td></tr><tr><td><p><span class="term">dt_name</span></p></td><td><p>name of the
        data type as known in the application
        analysis</p></td></tr><tr><td><p><span class="term">pointer_type</span></p></td><td><p>name of
        the pointer data type as known in generated implementation code.
        </p></td></tr><tr><td><p><span class="term">include_file</span></p></td><td><p>
        optional include file which declares the implementation type
        of `pointer_type'.</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872704128"></a><p class="title"><b>Example 4.4. Mapping Pointer Types</b></p><div class="example-contents"><pre class="programlisting">
.invoke MapDataTypeAsPointer( "MyDom", "DataPacket", "char", "" )
.invoke MapDataTypeAsPointer( "DomA", "AcmeType", "SomeStruct_t", "legacy.h" )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Specifying Uninitialized Enumerators"><div class="titlepage"><div><div><h4 class="title"><a id="SpecifyingUnitialized-section"></a>Specifying Uninitialized Enumerators</h4></div></div></div><p>In analysis models, enumerated types defined within BridgePoint Builder
      (using the Data Type editor available in BP5.0+) have no initial
      (uninitialized) value.  With marking, it is possible to
      explicity define this value for uninitialized enumeration
      variables.  The <code class="filename">datatype.mark</code> provides the
      means for specifying this starting value.</p><p>To indicate to the software architecture that the
      uninitialized enumerator of an enumeration
      shall have a value other than the default, use the following
      invocation:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagUninitializedEnumerationValue</b>(</code></td><td>string <var class="pdparam">"component"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"enumeration"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"value"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>
        component name (Use ``*'' to indicate a system wide data type to
        be applied to all components containing the enumeration data
        type.)</p></td></tr><tr><td><p><span class="term">enumeration</span></p></td><td><p>is the
        name of the enumration data type as known in the application
        analysis.  Use ``*'' to indicate <span class="emphasis"><em>all</em></span>
        enumerations in a component or system wide.</p></td></tr><tr><td><p><span class="term">value</span></p></td><td><p>a string
        containing the value to be assigned to the unitialized
        enumerator</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872691584"></a><p class="title"><b>Example 4.5. Specifying a Value for the Default Uninitialized Enumerator</b></p><div class="example-contents"><p>
        Domain specific:
        </p><pre class="programlisting">
.invoke TagUninitializedEnumerationValue( "MO", "wattage", "4" )
        </pre><p>
        All Enumerations in Domain:
        </p><pre class="programlisting">
.invoke TagUninitializedEnumerationValue( "MO", "*", "0x40" )
        </pre><p>
        System Wide:
        </p><pre class="programlisting">
.invoke TagUninitializedEnumerationValue( "*", "wattage", "0x20" )
        </pre><p>
        All Enumerations in All Domains:
        </p><pre class="programlisting">
.invoke TagUninitializedEnumerationValue( "*", "*", "100" )
        </pre><p>
        </p></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Specifying Values for Enumerators"><div class="titlepage"><div><div><h4 class="title"><a id="SpecifyingEnumValues-section"></a>Specifying Values for Enumerators</h4></div></div></div><p>In some target environments, it may be desirable to
      select the integer values of the individual enumerators in
      an enumeration.  MC-3020 enables the assigning of discrete
      values to one or more of the enumerators in an enumeration.
      </p><p>Invoke <code class="function">TagEnumeratorDiscreteValue</code> to
      indicate to the model compiler that a user defined enumeration data
      type enumerator shall have a value other than the
      default.
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagEnumeratorDiscreteValue</b>(</code></td><td>string <var class="pdparam">"component"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"enumeration"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"enumerator"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"value"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>
        component name (Use ``*'' to indicate a system wide data type to
        be applied to all components containing the enumeration data
        type.)</p></td></tr><tr><td><p><span class="term">enumeration</span></p></td><td><p>is the
        name of the enumration data type as known in the application
        analysis.  Use ``*'' to indicate <span class="emphasis"><em>all</em></span>
        enumerations in a component or system wide.</p></td></tr><tr><td><p><span class="term">value</span></p></td><td><p>a string
        containing the value to be assigned to the specified
        enumerator</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872676464"></a><p class="title"><b>Example 4.6. Specifying Enumerator Values</b></p><div class="example-contents"><p>
        Domain specific:
        </p><pre class="programlisting">
.invoke TagEnumeratorDiscreteValue( "MO", "wattage", "low", "4" )
.invoke TagEnumeratorDiscreteValue( "MO", "wattage", "med", "0x20" )
        </pre><p>
System Wide:
        </p><pre class="programlisting">
.invoke TagEnumeratorDiscreteValue( "*", "wattage", "high", "0x40" )
        </pre><p>
        </p></div></div><p><br class="example-break" />
      </p></div></div><div class="section" title="System Level Marks"><div class="titlepage"><div><div><h3 class="title"><a id="idm60872673456"></a>System Level Marks</h3></div></div></div><p>There are characteristics of the system as a whole that
    may need to be controlled during translation.  Several
    constants define resource allocation and generation constraints.
    Some constants allow for ``tweaking'' the system to obtain
    optimal performance in terms of size or speed.  These 
    constants can be marked as the system architect desires.</p><p>
    <code class="filename">system.mark</code> provides the means for specifying
    these system constants.</p><p>Within system marking, the flavor of collection
    containers can be specified.  Different collection flavors
    provide optimizations for space or speed.</p><div class="section" title="Specifying a System Build Configuration"><div class="titlepage"><div><div><h4 class="title"><a id="Marking-SystemConfigurationPackage-section"></a>Specifying a System Build Configuration</h4></div></div></div><p>MC-3020 allows the user to select a package of components
        to be used when generating the code for the model.  Such a package
        is called a "system configuration".</p><p>A model may contain more components than are needed/required
        for a particular working configuration of a system.  Often a model
        will include additional components used for testing.  A user may
        want multiple versions of components.</p><p>To assemble a system
        configuration in BridgePoint, the user builds a component diagram in a
        package from component references and wires them together as
        desired.  Multiple system configurations packages may exist.
        Each configuration can be different and use only a subset of
        the components defined in the model.</p><p>When a component package is marked as the system
        configuration, code will be generated for components contained in
        this package and referred to from this package.
        Components <span class="emphasis"><em>not</em></span> contained in this package
        and <span class="emphasis"><em>not</em></span> referred to from this package will
        be excluded from code generation.</p><p>To mark a package as containing the system configuration:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkSystemConfigurationPackage</b>(</code></td><td>string <var class="pdparam">system_package</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameter(s) are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">system_package</span></p></td><td><p>is the
        name of the package containing the components wired together for
        a system build.
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872660896"></a><p class="title"><b>Example 4.7. Marking the System Configuration Package</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkSystemConfigurationPackage( "system1" )
.invoke MarkSystemConfigurationPackage( "system2" )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Enabling Multi-Tasking"><div class="titlepage"><div><div><h4 class="title"><a id="Marking-EnablingTasking-section"></a>Enabling Multi-Tasking</h4></div></div></div><p>MC-3020 provides for tasking/threading using the
        capabilities of the target operating system (OS) or real-time
        operating system (RTOS).  An example of an RTOS is the Nucleus
        PLUS real-time operating system.  </p><p>To cause MC-3020 to generate multi-tasking/threading code,
        invoke the following marking function.  Pass it arguments that
        specify the type of multi-tasking environment and whether or not
        to serialize all action processing (across all tasks).</p><p>To enable tasking in the generated system:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">EnableTasking</b>(</code></td><td>string <var class="pdparam">flavor</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">serialization</var>, </td></tr><tr><td> </td><td>integer <var class="pdparam">tasks</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">flavor</span></p></td><td><p>is the
        type of tasking environment being integrated ("POSIX", "Nucleus",
        "Windows" or "SystemC").
        </p></td></tr><tr><td><p><span class="term">serialization</span></p></td><td><p>is set
        to "serialize" to force all action across all tasks to be run
        sequentially.  Note that serializing the action processing
        reduces data access contention, but can severely reduce the 
        multi-tasking performance of the generated system.
        </p></td></tr><tr><td><p><span class="term">tasks</span></p></td><td><p>is the
        number of tasks/threads in the xtUML generated system.
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872648672"></a><p class="title"><b>Example 4.8. Enabling Tasking/Threading</b></p><div class="example-contents"><pre class="programlisting">
.invoke EnableTasking( "Nucleus", "", 4 )
.invoke EnableTasking( "POSIX", "serialize", 2 )
.invoke EnableTasking( "Windows", "", 3 )
.invoke EnableTasking( "SystemC", "", 1 )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Establishing Multi-Task Priority"><div class="titlepage"><div><div><h4 class="title"><a id="Marking-TaskPriority-section"></a>Establishing Multi-Task Priority</h4></div></div></div><p>Some flavors of tasking/threading allow for differing
        execution priorities of tasks or threads.
        MC-3020 allows the priorities of tasks to be set through
        marking.
        In systems that support explicit prioritization of tasks,
        each task (of the number specified in
        <code class="function">EnableTasking</code>) can
        have a priority assigned.  Use the following marking function
        to set the priority for each task.</p><p>To specify the priorities of tasks/threads:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">SetTaskPriority</b>(</code></td><td>integer <var class="pdparam">task_number</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">priority</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">task_number</span></p></td><td><p>is the
        number of the task starting with zero and going to one less
        than the number specified in <code class="function">EnableTasking</code>.
        </p></td></tr><tr><td><p><span class="term">priority</span></p></td><td><p>is a string
        representing the priority level of the task.  The string type
        of this argument allows for symbolic as well as numeric
        representation of task priority.  This representation will be a
        function of the tasking environment being integrated.
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872638880"></a><p class="title"><b>Example 4.9. Setting Task/Thread Priority</b></p><div class="example-contents"><pre class="programlisting">
.invoke SetTaskPriority( 0, "100" )
.invoke SetTaskPriority( 3, "high" )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Maximum String Size"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872636416"></a>Maximum String Size</h4></div></div></div><p>MC-3020 tries to use relatively safe methods of
      manipulating strings.  The ``n'' library functions are used
      (<code class="function">strncpy, strncpy, strncat</code>) rather than
      their more dangerous (as regards buffer overruns) counterparts.</p><p>To specify the maximum length of a string in the system:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagMaximumStringLength</b>(</code></td><td>integer <var class="pdparam">max_len</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">max_len</span></p></td><td><p>is the
        longest string that will be manipulated by the system.
        Truncation will occur beyond this length.
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872630624"></a><p class="title"><b>Example 4.10. Defining String Length</b></p><div class="example-contents"><pre class="programlisting">
.invoke TagMaximumStringLength( 16 )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Controlling Collection Sizes"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872629040"></a>Controlling Collection Sizes</h4></div></div></div><p>Sets of instances are collected for various AL
      operations.  Relationships with multiplicity MANY require
      set container mechanisms at the implementation level to
      manage the collection of related instances.  The maximum
      number of instances allowed in such collections can be
      controlled with a mark.</p><p>To specify the maximum ``relationship extent'' size
      in the system:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagMaximumRelationshipExtentSize</b>(</code></td><td>integer <var class="pdparam">value</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">value</span></p></td><td><p>represents
        the highest number of instances allowed in a MANY
        relationship.</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872623456"></a><p class="title"><b>Example 4.11. Max Relationship Extent</b></p><div class="example-contents"><pre class="programlisting">
.invoke TagMaximumRelationshipExtentSize( 8 )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Managing Selection Collections"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872621840"></a>Managing Selection Collections</h4></div></div></div><p>Another operation requiring set manipulation is a
      selection (SELECT MANY) that may result in a collection of multiple
      instances.</p><p>To specify the maximum ``selections extent'' size
      in the system:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagMaximumSelectionExtentSize</b>(</code></td><td>integer <var class="pdparam">value</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">value</span></p></td><td><p>represents
        number of containers that will be pre-allocated for AL
        SELECT statements.</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872616592"></a><p class="title"><b>Example 4.12. Max Selections Extent</b></p><div class="example-contents"><pre class="programlisting">
.invoke TagMaximumSelectionExtentSize( 12 )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Changing the Flavor of Collections"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872615008"></a>Changing the Flavor of Collections</h4></div></div></div><p>Collections are maintained with a mechanism of one type
      or another.  With this mark, the type desired for a particular
      translation can be specified.  The default is singly linked list
      container nodes.  Doubly linked list containers can be selected
      as flavor 20.  Doubly linked lists allow for faster deletion of
      instances in exchange for an additional pointer size (for ``prev'')
      per container in the system.</p><p>To specify the flavor of the collection nodes:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagCollectionsFlavor</b>(</code></td><td>integer <var class="pdparam">value</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">value</span></p></td><td><p>a numerical
        representation of a specific type and strategy of collections
        container.</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872609376"></a><p class="title"><b>Example 4.13. Collection Node Type Selection</b></p><div class="example-contents"><pre class="programlisting">
.invoke TagCollectionsFlavor( 20 )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Limiting/Extending Event Queues"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872607792"></a>Limiting/Extending Event Queues</h4></div></div></div><p>MC-3020 attempts to dynamically calculate reasonable
      and safe values for queue depths within the event generation
      and delivery mechanism.  However, for optimization purposes
      the user may wish to override these values.</p><p>To override the compiler calculated maximum queue
      depth for the self directed event queue:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagMaximumSelfDirectedEvents</b>(</code></td><td>integer <var class="pdparam">value</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">value</span></p></td><td><p>which
        is the hard-coded depth of the self-directed event queue.
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872602496"></a><p class="title"><b>Example 4.14. Self-Directed Queue Depth</b></p><div class="example-contents"><pre class="programlisting">
.invoke TagMaximumSelfDirectedEvents( 3 )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Limiting/Extending NonSelf Queue"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872600912"></a>Limiting/Extending NonSelf Queue</h4></div></div></div><p>To override the compiler calculated maximum queue
      depth for the instance directed event queue:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagMaximumNonSelfDirectedEvents</b>(</code></td><td>integer <var class="pdparam">value</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">value</span></p></td><td><p>which
        is the hard-coded depth of the non- self-directed event queue.
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872596208"></a><p class="title"><b>Example 4.15. Instance Directed Queue Depth</b></p><div class="example-contents"><pre class="programlisting">
.invoke TagMaximumNonSelfDirectedEvents( 5 )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Timer Queue"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872594624"></a>Timer Queue</h4></div></div></div><p>A mark is provided so the system analyst can direct
      the model compiler to increase or decrease the timer queue
      used to manage multiple pending xtUML timers (delayed events).
      To override the compiler calculated queue
      depth for pending xtUML timers:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagMaximumPendingOoaTimers</b>(</code></td><td>integer <var class="pdparam">value</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">value</span></p></td><td><p>represents
        is the hard-coded maximum number of timers that may be pending
        expiration at any point in time.</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872589616"></a><p class="title"><b>Example 4.16. Pending xtUML Timers</b></p><div class="example-contents"><pre class="programlisting">
.invoke TagMaximumPendingOoaTimers( 6 )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Simulated Time"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872588016"></a>Simulated Time</h4></div></div></div><p>Simulated Time in MC-3020 implements a form of discrete event
      simulation.  In simulated time mode, no external clock is read.  The
      application runs as fast as the architecture allows.  The time base is
      derived from timers used to cause functional delays in the modeled
      application.</p><p>SystemC and Verifier both support modes where time is "simulated".
      In these environments, "wall clock" is not used.  The timers in the system
      advance the system time in sequence of expiration.  This is convenient for
      very fast (short-running) and for very slow (long-running) applications.
      </p><p>
      To switch from the default wall clock time base to simulated time:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkSimulatedTime</b>(</code></td><td><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>

      </p><div class="example"><a id="idm60872582944"></a><p class="title"><b>Example 4.17. Establish Simulated Time Base</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkSimulatedTime()
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Interleaved Bridges"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872581536"></a>Interleaved Bridges</h4></div></div></div><p>Use this mark to expand or reduce the depth of the queue used
      to interleave ``asynchronous'' bridge operations between state
      actions.  The default will be a system divined value that should
      be relatively safe in most cases.</p><p>To hard-code the depth of the interleaved bridges queue:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagMaximumInterleavedBridges</b>(</code></td><td>integer <var class="pdparam">value</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">value</span></p></td><td><p>represents
        the maximum queue depth for safe bridge operations that
        are interleaved between state actions (to maintain data access
        set consistency).</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872575968"></a><p class="title"><b>Example 4.18. Interleaved Bridges Queue Depth</b></p><div class="example-contents"><pre class="programlisting">
.invoke TagMaximumInterleavedBridges( 4 )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Interleaved Bridge Data"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872574528"></a>Interleaved Bridge Data</h4></div></div></div><p>Use this mark to define how many bytes of argument data
      come in across an interleaved bridge operation.  The default is 8.
      </p><p>To hard-code the width of the interleaved bridge argument path:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagInterleavedBridgeDataSize</b>(</code></td><td>integer <var class="pdparam">value</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">value</span></p></td><td><p>represents
        the maximum number of bytes of arguments that an interleaved
        bridge may receive during an invocation.
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872569264"></a><p class="title"><b>Example 4.19. Interleaved Bridge Argument Data</b></p><div class="example-contents"><pre class="programlisting">
.invoke TagInterleavedBridgeDataSize( 2 )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Marking Persistence Cache Queue Depth"><div class="titlepage"><div><div><h4 class="title"><a id="PeristenceCacheDepth-section"></a>Marking Persistence Cache Queue Depth</h4></div></div></div><p>This mark is used to specify the maximum number of instances and
      links that can be queued waiting to be flushed to non-volatile
      storage (NVS).  As instances and links become "dirty" they get
      queued to NVS.  When PERSIST::Commit is called these queues are flushed.
      </p><p>To change the default depth (128) to something different:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkPersistenceCacheDepth</b>(</code></td><td>integer <var class="pdparam">instance_depth</var>, </td></tr><tr><td> </td><td>integer <var class="pdparam">link_depth</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>

      Where the argument:

      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">instance_depth</span></p></td><td><p>is
        the number of instances that can be queued waiting to be flushed
        to non-volatile storage (NVS).
        </p></td></tr><tr><td><p><span class="term">link_depth</span></p></td><td><p>is
        the number of links that can be queued waiting to be flushed
        to non-volatile storage (NVS).
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872559728"></a><p class="title"><b>Example 4.20. Changing Persistence Cache Queue Depth</b></p><div class="example-contents"><p>
        </p><pre class="programlisting">.invoke MarkPersistenceCacheDepth( 16, 32 )</pre><p>
        </p><pre class="programlisting">.invoke MarkPersistenceCacheDepth( 1000, 500 )</pre><p>
        </p></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Marking Dynamic Memory Allocation On"><div class="titlepage"><div><div><h4 class="title"><a id="DynamicMemoryAllocation-section"></a>Marking Dynamic Memory Allocation On</h4></div></div></div><p>By default, MC-3020 statically allocates instance data and 
      all mechanistic collection containers.  This is great for many deeply 
      embedded applications.  However, some applications require the 
      flexibility of dynamically allocated storage.  In such an application, 
      the number of instances of elements from the xtUML model file is not
      predictable.  Here, the application needs to be able to
      allocate more memory when the statically allocated memory runs out.
      </p><p>To turn on and use dynamic memory allocation:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">TagDynamicMemoryAllocationOn</b>(</code></td><td>integer <var class="pdparam">additional_instances</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>

      Where the argument:

      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">additional_instances</span></p></td><td><p>is
        the number of additional instances to allocate each time space for
        new instances runs out.</p></td></tr></tbody></table></div><p>

      </p><div class="example"><a id="idm60872551168"></a><p class="title"><b>Example 4.21. Using Dynamic Memory Allocation</b></p><div class="example-contents"><p>
        </p><pre class="programlisting">.invoke TagDynamicMemoryAllocationOn( 2 );</pre><p>
        </p></div></div><p><br class="example-break" />
      </p><p>When dynamic memory allocation is marked off, system 
      user callout functions are called when a request is made to allocate 
      resources beyond what is statically available.</p></div><div class="section" title="Marking State Save"><div class="titlepage"><div><div><h4 class="title"><a id="MarkingStateSave-section"></a>Marking State Save</h4></div></div></div><p>State Save is a feature that captures information present in
      the running system that may be useful for analysis and debugging
      purposes.  Upon a state save trigger, information is collected into
      a buffer of a size specified through marking (this mark).</p><p>From the application model, state saves are controlled through
      bridges on an external entity named 'state save' (with key letters
      'SS').  A default version of this external entity is supplied with
      the model compiler.  It is expected that users will modify the state
      save external entity realized code.
      </p><p>To enable state save capability and specify the size of the buffer:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkStateSave</b>(</code></td><td>integer <var class="pdparam">buffer_size</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>

      Where the argument:

      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">buffer_size</span></p></td><td><p>is the size
        expressed in bytes of the buffer where state save information will
        be stored.</p></td></tr></tbody></table></div><p>

      </p><div class="example"><a id="idm60872541280"></a><p class="title"><b>Example 4.22. Configuring State Save</b></p><div class="example-contents"><p>
        </p><pre class="programlisting">.invoke MarkStateSave( 1024 );</pre><p>
        </p></div></div><p><br class="example-break" />
      </p></div><div class="section" title="SystemC-specific Markings"><div class="titlepage"><div><div><h4 class="title"><a id="SystemC-section"></a>SystemC-specific Markings</h4></div></div></div><div class="section" title="Mark Port Type"><div class="titlepage"><div><div><h5 class="title"><a id="SystemC-PortType-section"></a>Mark Port Type</h5></div></div></div><p>By default, the SystemC model compiler generates basic 
          <em class="parameter"><code>sc_interface</code></em> ports.  The tool also supports 
          generating TLM ports as well as bit level signals.  All ports will be 
          generated using the given value, so this marking function should 
          be invoked only once in the marking file.  If the marking is invoked 
          multiple times, the last one processed is used.
          </p><p>Specify the SystemC port type to generate:
          </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkSystemCPortType</b>(</code></td><td>string <var class="pdparam">type</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>

          Where the argument:

          </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">type</span></p></td><td><p>Can be 
            "sc_interface", "TLM", or "BitLevelSignals". Using 
            "sc_interface" causes the code generator to create interface classes
            that implement the interface using vanilla C++.  "TLM" causes the 
            code generator to create interface classes that conform to the 
            SystemC Transaction-Level Modeling paradigm.  TLM interfaces provide
            a means to perform hardware and software module connection and 
            coverification. Using "BitLevelSignals" causes the code generator to
            create interfaces that correspond to hardware wires in an 
            application model of hardware.  It also causes the generation of 
            additional wires "clk"  and "rst_X" in components that represent 
            hardware.</p></td></tr></tbody></table></div><p>

          </p><div class="example"><a id="idm60872531456"></a><p class="title"><b>Example 4.23. Setting the Port Type</b></p><div class="example-contents"><p>
            </p><pre class="programlisting">.invoke MarkSystemCPortType( "sc_interface" );</pre><p>
            </p><pre class="programlisting">.invoke MarkSystemCPortType( "TLM" );</pre><p>
            </p><pre class="programlisting">.invoke MarkSystemCPortType( "BitLevelSignals" );</pre><p>
            </p></div></div><p><br class="example-break" />
          </p></div><div class="section" title="Mark All Ports Polymorphic"><div class="titlepage"><div><div><h5 class="title"><a id="SystemC-AllPortsPoly-section"></a>Mark All Ports Polymorphic</h5></div></div></div><p>An interface port is said to be "polymorphic" when a component 
          exposes (provides or requires) the same interface multiple times.  The
          model compiler treats polymorphic and non-polymorphic ports 
          differently.  It generates additional checks to resolve ambiguity when
          messages are sent through polymorphic ports.
          </p><p>Specify the SystemC port type to generate:
          </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkAllPortsPolymorphic</b>(</code></td><td><code>void)</code>;</td><td> </td></tr></table><div class="funcprototype-spacer"> </div></div><p>

          No arguments.

          </p><div class="example"><a id="idm60872524512"></a><p class="title"><b>Example 4.24. Treat All Ports as Polymorphic</b></p><div class="example-contents"><p>
            </p><pre class="programlisting">.invoke MarkAllPortsPolymorphic();</pre><p>
            </p></div></div><p><br class="example-break" />
          </p></div><div class="section" title="Mark Component As Channel"><div class="titlepage"><div><div><h5 class="title"><a id="SystemC-ComponentAsChannel-section"></a>Mark Component As Channel</h5></div></div></div><p>The SystemC model compiler supports marking individual 
          components as pre-defined SystemC channels.
          </p><p>Components that are marked as pre-defined channels have no 
          internal behavior generated for them by the model compiler.  Instead, 
          the implementation is expected to be provided by the referenced 
          include file.</p><p>In components that make use of pre-defined channels, the channel
          declaration is bypassed.  In addition, the binding of ports inside the
          pre-defined channel is bypassed and components that use the 
          pre-defined channel are bound to the pre-defined channel's name 
          instead of the channel generated by the model compiler.</p><p>Specify the component as a SystemC channel:
          </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkAsChannel</b>(</code></td><td>string <var class="pdparam">package</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">component</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">include file</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>

          Where the arguments:

          </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">package</span></p></td><td><p>name of the 
            package being marked</p></td></tr><tr><td><p><span class="term">component</span></p></td><td><p>name of the 
            component (domain) being marked</p></td></tr><tr><td><p><span class="term">include file</span></p></td><td><p>name of the 
            include file containing the channel's implementation</p></td></tr></tbody></table></div><p>

          </p><div class="example"><a id="idm60872511568"></a><p class="title"><b>Example 4.25. Marking a Component as a Channel</b></p><div class="example-contents"><p>
            </p><pre class="programlisting">.invoke MarkAsChannel( "*", "wait_hs", "my_channel.h" );</pre><p>
            </p></div></div><p><br class="example-break" />
          </p></div><div class="section" title="Mark Interface Prefix"><div class="titlepage"><div><div><h5 class="title"><a id="SystemC-InterfacePrefix-section"></a>Mark Interface Prefix</h5></div></div></div><p>The SystemC model compiler supports adding a prefix to the 
          generated names of provided ports, required ports, and channels.  Use 
          this marking to set these prefixes on all elements of these types.
          </p><p>Specify the prefixes to use on interface elements:
          </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkInterfacePrefix</b>(</code></td><td>string <var class="pdparam">provided_port</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">required_port</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">channel</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>

          Where the arguments:

          </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">provided_port</span></p></td><td><p>text to add 
            as a prefix on provided port generated names</p></td></tr><tr><td><p><span class="term">required_port</span></p></td><td><p>text to add 
            as a prefix on required port generated names</p></td></tr><tr><td><p><span class="term">channel</span></p></td><td><p>text to add as a 
            prefix on channel generated names </p></td></tr></tbody></table></div><p>

          </p><div class="example"><a id="idm60872500096"></a><p class="title"><b>Example 4.26. Marking Interface Prefixes</b></p><div class="example-contents"><p>
            </p><pre class="programlisting">.invoke MarkInterfacePrefix( "proPort", "reqPort", "channel" );</pre><p>
            </p></div></div><p><br class="example-break" />
          </p></div><div class="section" title="C++ Template Feature"><div class="titlepage"><div><div><h5 class="title"><a id="SystemC-CPPTemplate-section"></a>C++ Template Feature</h5></div></div></div><p>The SystemC model compiler supports marking components and 
          interfaces as reusable paramterized C++ templates.</p><p>To avoid ambiguity between components and component references, 
          users must set the <em class="parameter"><code>ClassifierName</code></em> to a unique 
          value in the element's Properties.  Also, be sure to name ports in a 
          way that they can all be marked.  Do not reuse the same port name when
          connecting to different interfaces.</p><p>Interface template parameters must be supplied with a default 
          value which is used in the channel signal declarations.</p><p>Specify the template parameter information:
          </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkComponentWithTemplate</b>(</code></td><td>string <var class="pdparam">package_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">component_name</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
          </p><div class="funcsynopsis"><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkInterfaceWithTemplate</b>(</code></td><td>string <var class="pdparam">package_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">interface_name</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">AddTemplateParameter</b>(</code></td><td>string <var class="pdparam">package_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">component_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">type_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">variable_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">default_value</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
          </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">SetTPV</b>(</code></td><td>string <var class="pdparam">package_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">parent_component_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">component_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">classifier_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">port</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">variable_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">value</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>

          Where the arguments:

          </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">package_name</span></p></td><td><p>Name of the 
            package being marked.</p></td></tr><tr><td><p><span class="term">component_name</span></p></td><td><p>Name of the
            component (domain) being marked.</p></td></tr><tr><td><p><span class="term">interface_name</span></p></td><td><p>Name of the
            interface being marked.</p></td></tr><tr><td><p><span class="term">type_name</span></p></td><td><p>Type of the 
            given parameterized variable.</p></td></tr><tr><td><p><span class="term">variable_name</span></p></td><td><p>Name of the 
            template variable being set.</p></td></tr><tr><td><p><span class="term">default_value</span></p></td><td><p>Default type
            to apply to the template variable. Interface template parameters 
            must be supplied with a default value which is used in the channel 
            signal declarations.</p></td></tr><tr><td><p><span class="term">parent_component_name</span></p></td><td><p>Name
            of the component package that is a child of the specified 
            <em class="parameter"><code>package_name</code></em> and the parent of the specified 
            <em class="parameter"><code>component_name</code></em>.  If 
            <em class="parameter"><code>component_name</code></em> is a direct child of 
            <em class="parameter"><code>package_name</code></em>, leave this field empty.  Only
            use when an extra layer of nesting information must be supplied.
            </p></td></tr><tr><td><p><span class="term">classifier_name</span></p></td><td><p>Identifies
            the unique instance of a component (a component reference) that is 
            the target of the template parameter value (whether for the instance 
            itself or for one of its ports).</p></td></tr><tr><td><p><span class="term">port</span></p></td><td><p>Is only used when 
            marking a template parameter value for the usage of an interface 
            (port). If this parameter is empty, then the template parameter 
            value will be applied to the component reference. If this parameter 
            is not empty, then the template parameter value will be applied to 
            the interface usage (port) found on the targeted component 
            reference.</p></td></tr><tr><td><p><span class="term">value</span></p></td><td><p>Type to apply
            to the named template variable.</p></td></tr></tbody></table></div><p>

          </p><div class="example"><a id="idm60872463520"></a><p class="title"><b>Example 4.27. Marking a template parameter</b></p><div class="example-contents"><p>
            </p><pre class="programlisting">
.// for component reference:
.invoke MarkComponentWithTemplate( "simtop", "wait_hs" )
.invoke AddTemplateParameter( "simtop", "wait_hs", "class", "T", "rgb_t")
.invoke SetTPV( "simtop", "", "wait_hs", "din", "", "T", "abc_t" )
.invoke SetTPV( "simtop", "", "wait_hs", "din", "", "U", "xyz_t" )
.// for interface reference:
.invoke MarkInterfaceWithTemplate( "", "wait_out" )
.invoke AddTemplateParameter( "", "wait_out", "class", "T", "rgb_t")
.invoke SetTPV( "simtop", "", "filt_top", "i_filt_top", "din", "T", "my_t" )
.invoke SetTPV( "simtop", "", "filt_top", "i_filt_top", "dout", "T", "int" )
            </pre><p>
            </p></div></div><p><br class="example-break" />
          </p></div></div></div><div class="section" title="Component (Domain) Specializations"><div class="titlepage"><div><div><h3 class="title"><a id="idm60872461184"></a>Component (Domain) Specializations</h3></div></div></div><p>Within MC-3020 component level customizations can be
    applied.  The marking file
    <code class="filename">domain.mark</code> is the place to tag
    the customizations.</p><div class="section" title="Identifying Initialization Functions"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872459680"></a>Identifying Initialization Functions</h4></div></div></div><p>Initialization functions provide the analyst a means
      to specify preexisting instances for production
      bring-up.  They also serves to set up test scenarios.
      Domain functions also can be activated/deactivated with marking.
      Through marking, specific initialization functions can be
      chosen for system bring-up while others are marked (or erased
      as the case may be) as not to be translated.</p><p>Marking a function for initialization does not change
      the function.  The function remains available for invocation
      by any of the action semantics that could normally call it.
      If more than one function is tagged as an initialization function,
      each will be invoked.  The order of invocation is alphabetical
      by function name.</p><p>Identify a function in the component to be used as the an
      initialization function by invoking the following rule file
      function in the <code class="filename">domain.mark</code> marking file.
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkInitializationFunction</b>(</code></td><td>string <var class="pdparam">"component"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"function_name"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component&gt;</span></p></td><td><p>is 
        the name of the component (domain) containing the initialization
        function.</p></td></tr><tr><td><p><span class="term">function_name</span></p></td><td><p>is
        the name of the function (synchronous service) to be
        invoking during bring-up.
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872450848"></a><p class="title"><b>Example 4.28. Marking Initialization Functions</b></p><div class="example-contents"><p>
        </p><pre class="programlisting">
.invoke MarkInitializationFunction( "*", "CreateAndPopulate" )
.invoke MarkInitializationFunction( "SeatHeater", "test" )
        </pre><p>
        </p></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Identifying Initialization Objects"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872448656"></a>Identifying Initialization Objects</h4></div></div></div><p>Initialization objects represent an obsolete 
      means for the analyst to specify preexisting
      instances for production bring-up.
      All of the functionality of the obsolete
      <code class="function">TagInitializationObject</code>
      is now provided in functions
      which can be activated/deactivated and marked for initialization.
      Use functions instead of initialization objects.
      See <code class="function">MarkInitializationFunction</code>.</p></div><div class="section" title="Excluding Classes"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872446160"></a>Excluding Classes</h4></div></div></div><p>MC-3020 can be directed to skip code generation for
      classes marked with the
      <code class="function">MarkExcludeObjectFromCodeGen</code>
      invocation.  Combined with selective marking of initialization
      functions, class exclusion allows for a simple method of
      providing multiple bring-up scenarios.  Exclude a class from
      code generation by marking it thusly:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkExcludeObjectFromCodeGen</b>(</code></td><td>string <var class="pdparam">"component"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"key_letters"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>name of 
        component (domain) being marked</p></td></tr><tr><td><p><span class="term">key_letters</span></p></td><td><p>key
        letters of the excluded class</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872439216"></a><p class="title"><b>Example 4.29. Marking Excluded Classes</b></p><div class="example-contents"><p>
        </p><pre class="programlisting">
.invoke MarkExcludeObjectFromCodeGen( "*", "TST_OBJ" )
.invoke MarkExcludeObjectFromCodeGen( "MicrowaveOven", "Test" )
        </pre><p>
        </p></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Excluding Subsystems"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872437072"></a>Excluding Subsystems</h4></div></div></div><p>To indicate to the model compiler that all classes
      in a specified subsystem should be excluded from implementation
      code generation, use the following invocation (one for each
      excluded subsystem):
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkExcludeSubsystemFromCodeGen</b>(</code></td><td>string <var class="pdparam">"component"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"subsystem"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>name
        of the component (domain) being marked</p></td></tr><tr><td><p><span class="term">subsystem</span></p></td><td><p>name
        of the excluded subsystem</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872430640"></a><p class="title"><b>Example 4.30. Tagging Excluded Subsystems</b></p><div class="example-contents"><p>
        </p><pre class="programlisting">
.invoke MarkExcludeSubsystemFromCodeGen( "*", "MyVerifierUnitTests" )
.invoke MarkExcludeSubsystemFromCodeGen( "GPS", "UI" )
        </pre><p>
        </p></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Disabling Function Translation"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872428448"></a>Disabling Function Translation</h4></div></div></div><p>To indicate to the model compiler that the semantic
      action of a function should not be translated, mark the
      function with the <code class="function">MarkFunctionTranslationOff</code>
      marking function.  This is useful for selectively disabling
      functions used to set up test scenarios.  This is also key
      for disabling initialization functions after preexisting
      instances have been created and saved in XML data.
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkFunctionTranslationOff</b>(</code></td><td>string <var class="pdparam">"component"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"function_name"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>name
        of the component being marked</p></td></tr><tr><td><p><span class="term">function_name</span></p></td><td><p>name
        of the excluded function (synchronous
        service)</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872421456"></a><p class="title"><b>Example 4.31. Not Translating a Function</b></p><div class="example-contents"><p>
        </p><pre class="programlisting">
.invoke MarkFunctionTranslationOff( "*", "CreateRelateInit" )
.invoke MarkFunctionTranslationOff( "Test", "TestScenarioFive" )
        </pre><p>
        </p></div></div><p><br class="example-break" />
      </p></div><div class="section" title="State Transition Trace"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872419296"></a>State Transition Trace</h4></div></div></div><p>To instruct the model compiler to generate
      state transition tracing information, invoke the
      following rule file function:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkStateTransitionTracingOn</b>(</code></td><td>string <var class="pdparam">"component"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>name
        of the component being marked</p></td></tr></tbody></table></div><p>

      </p><div class="example"><a id="idm60872414720"></a><p class="title"><b>Example 4.32. Enabling State Transition Tracing</b></p><div class="example-contents"><p>
        </p><pre class="programlisting">
.invoke MarkStateTransitionTracingOn( "*" )
.invoke MarkStateTransitionTracingOn( "Location" )
        </pre><p>
        </p></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Action Language Trace"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872412640"></a>Action Language Trace</h4></div></div></div><p>To instruct the model compiler to generate
      tracing information at the action language statement
      level, invoke the following rule file function:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkActionStatementTracingOn</b>(</code></td><td>string <var class="pdparam">"component"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>name
        of the component being marked</p></td></tr></tbody></table></div><p>

      </p><div class="example"><a id="idm60872408032"></a><p class="title"><b>Example 4.33. Enabling Action Language Tracing</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkActionStatementTracingOn( "*" )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Empty Handle Usage"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872406416"></a>Empty Handle Usage</h4></div></div></div><p>It is possible to develop xtUML models that incorrectly attempt
      to use instance reference variables that are empty (null).  This
      can occur under several sets of circumstances.  For example,
      selection across a conditional relationship chain may return
      an empty instance reference or empty instance reference set.
      Using such a reference without testing for empty can lead to
      an invalid operation.  (MC-3020 does not enforce relationship
      conditionality at model compilation time.)  It is possible
      to build models that attempt to send events to empty instance
      references, or relate or unrelate (link/unlink) instance when
      one or both references are empty.</p><p>MC-3020 provides a markable debug option for detecting
      and potentially recovering from such empty ``handle'' references.
      To steer the model compiler into generating debug code that
      detects the use of empty instance references and instance set
      references (handles), invoke the following rule file function:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkEmptyHandleDetectionOn</b>(</code></td><td>string <var class="pdparam">"component"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>name
        of the component being marked</p></td></tr></tbody></table></div><p>

      </p><div class="example"><a id="idm60872400928"></a><p class="title"><b>Example 4.34. Enabling Empty Reference Usage Detection</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkEmptyHandleDetectionOn( "*" )
        </pre></div></div><p><br class="example-break" />
      </p><p>MC-3020 will generate detection code and invoke a
      macro when an improper handle usage is detected.  The
      macro defaults to invocation of a user callout function,
      <code class="function">UserEmptyHandleDetectedCallout</code>.
      The body of this callout function can be (re)defined by
      the user.</p></div><div class="section" title="Disabling First Pass Optimizations"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872398176"></a>Disabling First Pass Optimizations</h4></div></div></div><p>At times it is necessary to carefully study the
      generated code.  This may be the case when enhancing or extending
      the default functionality of MC-3020.  Under such circumstances,
      it may be desirable to see the code in its
      <span class="emphasis"><em>un</em></span>optimized format.  Note that MC-3020 has
      several optimizations that eliminate unused code.  During design,
      sometimes it is desirable to see what this unused code looks
      like.  Using <code class="function">MarkFirstPassOptimizationsOff()</code>,
      it is possible to force MC-3020 to generate the code in its
      unoptimized form.</p><p>
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkFirstPassOptimizationsOff</b>(</code></td><td>string <var class="pdparam">"component"</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>name
        of the component being marked</p></td></tr></tbody></table></div><p>

      </p><div class="example"><a id="idm60872391648"></a><p class="title"><b>Example 4.35. Forcing Generation Non-Optimal Code</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkFirstPassOptimizationsOff( "ship" )
        </pre></div></div><p><br class="example-break" />
      </p><p>MC-3020 will generate all code, even if it is
      not expected to be executed during normal operation.</p></div><div class="section" title="Miscellaneous Domain Marking"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872389392"></a>Miscellaneous Domain Marking</h4></div></div></div><p>Additional marking adjustments are available
      in the <code class="filename">domain.mark</code> marking file.
      Marking options that manipulate the style and appearance
      of the generated code and that control optimizations
      can be enabled.  See documentation in the marking file
      for these detailed options.</p><p>Marking commands for these aesthetic purposes
      include:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>MarkStateActionCommentBlocksEnabled( component_name )</p></li><li class="listitem"><p>MarkStateActionStatementCommentsDisabled( component_name )</p></li><li class="listitem"><p>TagStateActionVariableNamesEnabled()</p></li><li class="listitem"><p>TagVerboseReflexivePhrasesEnabled()</p></li></ul></div><p>
      </p></div></div><div class="section" title="Class Specializations"><div class="titlepage"><div><div><h3 class="title"><a id="idm60872384000"></a>Class Specializations</h3></div></div></div><p>MC-3020 provides several customizations that can be
    selected on a class boundary.  The
    <code class="filename">class.mark</code> provides the means for marking
    these class specializations.</p><div class="section" title="Mapping Classes to Tasks/Threads"><div class="titlepage"><div><div><h4 class="title"><a id="Marking-MappingClassesToTasks-section"></a>Mapping Classes to Tasks/Threads</h4></div></div></div><p>When running in a multi-tasking/threading environment
        the user can cause the generated code for xtUML classes to
        run in different tasks/threads.  This mappings is accomplished
        using the <code class="function">MarkClassToTask</code> marking function.
        Note that mapping tightly coupled classes (where some classes
        frequently access instance data of the other classes) to different
        tasks can aggravate data synchronization issues.  Map closely
        coupled classes to the same task.</p><p>To map a class or set of classes to a particular task number:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkClassToTask</b>(</code></td><td>string <var class="pdparam">component</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">ss_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">class_key_letters</var>, </td></tr><tr><td> </td><td>integer <var class="pdparam">task_number</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>
        name of component (domain) being marked 
        </p></td></tr><tr><td><p><span class="term">ss_name</span></p></td><td><p>
        name of subsystem
        </p></td></tr><tr><td><p><span class="term">class_key_letters</span></p></td><td><p>
        keyletters of the class being mapped
        </p></td></tr><tr><td><p><span class="term">task_number</span></p></td><td><p> is
        the number (starting with 0) of the task to which the indicated
        class (or classes) is assigned
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872370592"></a><p class="title"><b>Example 4.36. Mapping Classes to Tasks</b></p><div class="example-contents"><pre class="programlisting">
.// NOTES:
.// (1) To map a specific class, use "" for "ss_name"
.//     and provide the class key letters in "class_key_letters".
.// (2) To map all classes in the subsystem to the given task, provide
.//     the subsystem name for "ss_name" and "*" for the "class_key_letters".
.// (3) To mark all classes in the component as mapped to a task, use "*"
.//     for "ss_name" and "class_key_letters".
.//
.invoke MarkClassToTask( "", "", "MP", 1 )
.invoke MarkClassToTask( "GPS", "TRACKING", "*", 3 )
.invoke MarkClassToTask( "*", "*", "*", 0 )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Extent Sizes"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872369664"></a>Extent Sizes</h4></div></div></div><p>MC-3020 has limited the use of memory allocation.
      For memory constrained systems it is convenient to limit the
      number of instances of a class that can exist at any one
      time.  The following rule file function invocation will define
      that maximum number of instances that will ever be allocated
      for the given class.
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkObjectExtentSize</b>(</code></td><td>string <var class="pdparam">component</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">key_letters</var>, </td></tr><tr><td> </td><td>integer <var class="pdparam">value</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>name
        of the component (domain) being marked</p></td></tr><tr><td><p><span class="term">key_letters</span></p></td><td><p>key
        letters of the class</p></td></tr><tr><td><p><span class="term">value</span></p></td><td><p>maximum
        number of instances</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872359728"></a><p class="title"><b>Example 4.37. Marking Max Instances</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkObjectExtentSize( "myDomain", "FRODO", 20 )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Default Extent Size"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872358048"></a>Default Extent Size</h4></div></div></div><p>Early in the development cycle it may not be clear what
      the maximum number of instances of particular classes may be.
      MC-3020 provides a way to establish a default extent size to
      be used for all classes that do not explicitly define the
      maximum.
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkSystemObjectDefaultExtentSize</b>(</code></td><td>integer <var class="pdparam">value</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">value</span></p></td><td><p>default size
        for non-marked classes
        extents</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872353152"></a><p class="title"><b>Example 4.38. Marking Default Extent</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkSystemObjectDefaultExtentSize( 24 )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Enabling Preexisting Instances"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872351488"></a>Enabling Preexisting Instances</h4></div></div></div><p>Version 3.1 of MC-3020 supports defining preexisting
      instances in data.  This saves the time and space overhead of
      initialization objects.  Mark all classes that have instances
      pre-defined in data.</p><p>Use this mark to enable the generation of ANSI C structure
      initializers to pre-populate instance collections from supplied
      XML data.  There is no harm in marking a class as having preexisting
      instances in data even if it does not.  Such marking will have the
      effect of making the class eligible for population by preexisting
      instances defined in data.  All classes so marked will query for
      the existence of preexisting instances and will populate with
      them when defined.
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkPEIsDefinedInData</b>(</code></td><td>string <var class="pdparam">component</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">ss_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">class_key_letters</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>
        name of component (domain) being marked 
        </p></td></tr><tr><td><p><span class="term">ss_name</span></p></td><td><p>
        name of subsystem
        </p></td></tr><tr><td><p><span class="term">class_key_letters</span></p></td><td><p>
        keyletters of the class eligible for population by preexisting
        instances
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872342176"></a><p class="title"><b>Example 4.39. Marking Classes as Having PEIs Defined in Data</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkPEIsDefinedInData( "", "", "DOG" )
.invoke MarkPEIsDefinedInData( "Lab", "VET", "*" )
.invoke MarkPEIsDefinedInData( "*", "*", "*" )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Identifying Static Instance Populations"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872340464"></a>Identifying Static Instance Populations</h4></div></div></div><p>Static instance populations are those instance populations
      to which additions or deletions are never made during system
      execution.  By marking a class as having a static instance
      population, error messages will be generated if action language
      tries to create or delete instances of the marked class.</p><p>Use this mark to mark a population as having a fixed
      and unchanging population of instances.
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkStaticInstancePopulation</b>(</code></td><td>string <var class="pdparam">component</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">ss_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">class_key_letters</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>
        name of component (domain) being marked 
        </p></td></tr><tr><td><p><span class="term">ss_name</span></p></td><td><p>
        name of subsystem
        </p></td></tr><tr><td><p><span class="term">class_key_letters</span></p></td><td><p>
        keyletters of the class having fixed extent
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872331360"></a><p class="title"><b>Example 4.40. Marking Classes with Static Instance Populations</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkStaticInstancePopulation( "", "", "EXP" )
.invoke MarkStaticInstancePopulation( "Imaging", "OCR", "*" )
.invoke MarkStaticInstancePopulation( "*", "*", "*" )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Identifying Read Only Instance Populations"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872329648"></a>Identifying Read Only Instance Populations</h4></div></div></div><p>Read only classes are those classes which cannot be
      dynamically written or related.
      By marking a class as read-only,
      error messages will be generated if action language
      tries to write or relate instances of the marked class.</p><p>Use this mark to mark a class as having a read-only
      instances.
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkReadOnly</b>(</code></td><td>string <var class="pdparam">component</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">ss_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">class_key_letters</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>
        name of component (domain) being marked
        </p></td></tr><tr><td><p><span class="term">ss_name</span></p></td><td><p>
        name of subsystem
        </p></td></tr><tr><td><p><span class="term">class_key_letters</span></p></td><td><p>
        keyletters of the read-only class
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872320752"></a><p class="title"><b>Example 4.41. Marking Read-Only Classes</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkReadOnly( "", "", "BBALL" )
.invoke MarkReadOnly( "ODMS", "CAB", "*" )
.invoke MarkReadOnly( "*", "*", "*" )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Marking Persistence"><div class="titlepage"><div><div><h4 class="title"><a id="markingpersistence-section"></a>Marking Persistence</h4></div></div></div><p>Persistent classes retain the values of their attributes
      across power cycles.  This includes the current state of
      active state machines.
      Newly created and updated classes are
      "backed up" to non-volatile storage.  At system start-up time,
      any classes stored in non-volatile storage are restored before
      other application initialization occurs.  Individual classes
      can be marked to be persistent.</p><p>Use this mark to mark a class as persistent.
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"> <b class="fsfunc">MarkPersistentClass</b>(</code></td><td>string <var class="pdparam">component</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">ss_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">class_key_letters</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"> <b class="fsfunc">MarkNonPersistentClass</b>(</code></td><td>string <var class="pdparam">component</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">ss_name</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">class_key_letters</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>
        name of component (domain) being marked
        </p></td></tr><tr><td><p><span class="term">ss_name</span></p></td><td><p>
        name of subsystem
        </p></td></tr><tr><td><p><span class="term">class_key_letters</span></p></td><td><p>
        keyletters of the persistent class
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872305984"></a><p class="title"><b>Example 4.42. Marking (Non-) Persistent Classes</b></p><div class="example-contents"><pre class="programlisting">
.// To mark as persistent a specific class, use "" for "component" and 
.// "ss_name" and provide the class key letters in "class_key_letters".
.invoke MarkPersistentClass( "", "", "MP" )

.// To mark all classes in the subsystem as persistent, provide
.// the component name, the subsystem name for "ss_name" and "*" for
.// the "class_key_letters".
.invoke MarkPersistentClass( "GPS", "TRACKING", "*" )

.// To mark all classes in the component as persistent, use "*"
.// for "component", "ss_name" and "class_key_letters".
.invoke MarkPersistentClass( "*", "*", "*" )

.// To mark as non-persistent a specific class that had previously
./  been marked as persistent, use "" for "component" and "ss_name" and
.// provide the class key letters in "class_key_letters".
.invoke MarkNonPersistentClass( "", "", "ASN" )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Translating Operation and Bridge AL"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872304448"></a>Translating Operation and Bridge AL</h4></div></div></div><p>As of version 4.2 of BridgePoint Builder it is possible to
      translate the AL contained in bridge and operation
      descriptions.  This conveniently allows testing generated/compiled
      code in the same way it is tested on the BridgePoint Verifier.  Operation
      (transformer) AL
      is translated unless marked off; Bridge descriptions
      are always translated and simply added to the skeletons.</p><p>As of version 3.1 of MC-3020, the
      <code class="function">TagTransformerGeneration</code> is obsolete and
      does nothing functional other than generate a message.</p><p>This mark formerly (before version MC-3020 3.1)
      enabled the generation of ANSI C source
      code from Action Language (AL) embedded in the
      descriptions of named operation(s).  AL is always translated
      unless marked off with the command
      <code class="function">MarkClassOperationTranslationOff</code>.</p><p>To disable the translation of AL in class (or instance)
      based operations, use the following marking command.
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkClassOperationTranslationOff</b>(</code></td><td>string <var class="pdparam">component</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">class_keyletters</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">operation name</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>
        name of the component (domain) being marked 
        </p></td></tr><tr><td><p><span class="term">class_keyletters</span></p></td><td><p>
        keyletters of the class with which operation is associated
        </p></td></tr><tr><td><p><span class="term">operation name</span></p></td><td><p>
        operation name for which to disable source generation
        </p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872292752"></a><p class="title"><b>Example 4.43. Not Translating Operations</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkClassOperationTranslationOff( "", "T", "Cooking_Initializing" )
        </pre></div></div><p><br class="example-break" />
      </p></div><div class="section" title="Marking Class Tracing"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872291088"></a>Marking Class Tracing</h4></div></div></div><p>MC-3020 has trace capabilities that are controlled primarily
      at the system and component level.  However, often this granularity
      of control is not fine enough.  It can be desirable to trace only
      a few classes or to omit tracing from a few "uninteresting" or
      "noisy" classes that clog the trace log with too much information.
      The marks documented in this section allow trace control on a
      class by class basis.</p><p>To disable or enable tracing of a specific class,
      use the following marking commands:
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkClassTraceOff</b>(</code></td><td>string <var class="pdparam">component</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">class_keyletters</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkClassTraceOn</b>(</code></td><td>string <var class="pdparam">component</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">class_keyletters</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">component</span></p></td><td><p>
        name of the component containing the class being marked
        </p></td></tr><tr><td><p><span class="term">class_keyletters</span></p></td><td><p>
        key letters of the class for which tracing is to be
        controlled</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872280896"></a><p class="title"><b>Example 4.44. Disabling Tracing for a Class</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkClassTraceOff( "Tracking", "TrackPoint" )
        </pre></div></div><p><br class="example-break" />
      </p><div class="example"><a id="idm60872279616"></a><p class="title"><b>Example 4.45. Enabling Tracing for a Class</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkClassTraceOn( "Tracking", "TrackLog" )
        </pre></div></div><p><br class="example-break" />
      </p></div></div><div class="section" title="Event Prioritization"><div class="titlepage"><div><div><h3 class="title"><a id="idm60872277920"></a>Event Prioritization</h3></div></div></div><p>MC-3020 provides prioritization through the marking
    of events.  Events can be tagged to have priorities that
    accelerate the delivery of past events of lower priority
    that are currently outstanding.  This provides the user with
    a degree of control over the sequencing of xtUML threads of
    control within the system.
    <code class="filename">event.mark</code> provides the means for specifying
    these event prioritizations.</p><div class="section" title="Priority Events"><div class="titlepage"><div><div><h4 class="title"><a id="idm60872275600"></a>Priority Events</h4></div></div></div><p>To indicate to the model compiler than an event
      is to be given a priority, use the following invocation
      (one for each priority event):
      </p><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef"><b class="fsfunc">MarkPriorityEvent</b>(</code></td><td>string <var class="pdparam">"component"</var>, </td></tr><tr><td> </td><td>string <var class="pdparam">"event_label"</var>, </td></tr><tr><td> </td><td>integer <var class="pdparam">value</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div><p>
      
      Where the input parameters are:
      
      </p><div class="variablelist"><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><span class="term">"component"</span></p></td><td><p>is
        name of the component (domain) being marked</p></td></tr><tr><td><p><span class="term">"event_label"</span></p></td><td><p>is
        the name of the event (with number
        appended)</p></td></tr><tr><td><p><span class="term">value</span></p></td><td><p>is the
        relative priority of the event.  Legal values are 0 to 255
        inclusive.  0 is lowest and default.</p></td></tr></tbody></table></div><p>
      
      </p><div class="example"><a id="idm60872267536"></a><p class="title"><b>Example 4.46. Marking a Priority Event</b></p><div class="example-contents"><pre class="programlisting">
.invoke MarkPriorityEvent( "autosampler", "CAR1", 4 )
        </pre></div></div><p><br class="example-break" />
      </p></div></div><div class="section" title="MC-3020 Extent Prediction and Marking"><div class="titlepage"><div><div><h3 class="title"><a id="Containoids-section"></a>MC-3020 Extent Prediction and Marking</h3></div></div></div><p>First pass translation collects statistics used to
    conservatively estimate the number of container nodes (containoids)
    required by the system.</p><p>There are three different uses for instance containoids:
    class extents, association extents and selection extents.
    Selection extents govern the total size of transient instance
    reference set variables in the actions.  This represents values
    in the variable type <span class="type">inst_ref_set</span>.
    The required number of containoids for each flavor is summed
    to provide the upper limit to total containers.
    </p><pre class="programlisting">#define SYS_MAX_CONTAINERS \
    ( SYS_MAX_OBJECT_EXTENT + SYS_MAX_RELATIONSHIP_EXTENT + SYS_MAX_TRANSIENT_EXTENT )</pre><p>SYS_MAX_OBJECT_EXTENT is a sum of all of the extent counts across
    all the domains of the system, which are sums of the class extents
    in each domain.  Each class extent is allocated to be the system
    default for class extents, a marked value of the system default
    or the marked value for the specific class.</p><p>Selection extents are calculated by multiplying the largest
    number of selects that can occur in any action by the largest extent
    of any class.  Thus allowing for the worst case action to select
    the largest class extent each time.  This value is set in
    SYS_MAX_TRANSIENT_EXTENT.
    </p><pre class="programlisting">transient containers = ( max selects ) * ( largest class extent )</pre><p>Association extents are allowed to be as big as they would
    need to be if all instances on the MANY side were always
    participating.  This value is set in SYS_MAX_RELATIONSHIP_EXTENT.
    </p><pre class="programlisting">association containoids = ( number of MANYs ) * ( largest class extent )</pre><p>The following marks govern these extent sizes:

    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><pre class="programlisting">MaxObjectExtentSize( "component", "key_letters", value )</pre></li><li class="listitem"><pre class="programlisting">MaxSystemObjectDefaultExtentSize( value )</pre></li><li class="listitem"><pre class="programlisting">TagMaximumRelationshipExtentSize( value )</pre></li><li class="listitem"><pre class="programlisting">TagMaximumSelectionExtentSize( value )</pre></li></ul></div><p>
    
    See the proper sections in the MC-3020 Users Guide for details
    on these marking parameters.</p><p>Association extents refer to the sets of instances
    participating
    in a association with multiplicity MANY.  Sets built from
    linked lists are used to optimize traversal of associations with
    multiplicity MANY.  For example, in the following model,
    A 1---R1---* B,
    class B does not need an extent set; it simply needs a single
    pointer reference to the A instance.  The A instance however does
    need a set of instance references.  Such a set uses "containoids"
    to collect the B instances related to the A instance.
    MC-3020 calculates the worst case (biggest possible) association
    extent.</p><p>The extent can be marked to be smaller than the worst case
    maximum using TagMaximumRelationshipExtentSize.
    <span class="command"><strong>MarkObjectExtentSize</strong></span> will also have an effect on
    the calculated total.</p><p>If no extent size marking is supplied, MC-3020 will
    calculate a worst case for a model of a higher number of
    containers.  MC-3020 will see R1 and allow for all possible
    instances of B to participate with instances of A.  (This is the
    most important point!)</p><p>Another way to understand how MC-3020 calculates this maximum
    is as follows:
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Count the number of MANYs (---*) on a class
      diagram.</p></li><li class="listitem"><p> For each MANY (---*), add the maximum class
      extent on the MANY side (B above).</p></li><li class="listitem"><p>There are adjustments to be considered in the
      case of associative classes.</p></li></ol></div><p>
    This sum across all domains in the system will be the
    SYS_MAX_RELATIONSHIP_EXTENT.</p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s06.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Compiling </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 5. Enumerated Types</td></tr></table></div></body></html>